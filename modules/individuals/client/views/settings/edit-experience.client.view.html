<div ng-controller="ExperienceController">
  <section class="row">
    <div class="col-xs-offset-1 col-xs-10 col-md-offset-3 col-md-6">
      <form name="vm.experienceForm" ng-submit="vm.updateIndividualExperience(vm.experienceForm.$valid)" novalidate autocomplete="off">
        <div ng-repeat="experience in vm.experiences as results track by $index">
          <div class="individual-bio-element">
            
            <div class="form-group" show-errors>
              <label for="employer{{$index}}">Employer:</label>
              <input type="text" id="employer{{$index}}" name="employer{{$index}}" class="form-control" ng-model="vm.experiences[$index].employer" placeholder="Employer" required autofocus>
              <div ng-messages="vm.experienceForm['employer'+$index].$error" role="alert">
                <p class="help-block error-text" ng-message="required">Employer is required. </p>
              </div>
            </div>
            
            <div class="form-group" show-errors>
              <label for="jobTitle{{$index}}">Job Title:</label>
              <input type="text" id="jobTitle{{$index}}" name="jobTitle{{$index}}" class="form-control" ng-model="vm.experiences[$index].jobTitle" placeholder="Job Title" required>
              <div ng-messages="vm.experienceForm['jobTitle'+$index].$error" role="alert">
                <p class="help-block error-text" ng-message="required">Job Title is required. </p>
              </div>
            </div>
            
            <div class="form-group" show-errors>
              <label for="description{{$index}}">Description:</label>
              <input type="text" id="description{{$index}}" name="description{{$index}}" class="form-control" ng-model="vm.experiences[$index].description" placeholder="Description" required>
              <div ng-messages="vm.experienceForm['description'+$index].$error" role="alert">
                <p class="help-block error-text" ng-message="required">Description is required. </p>
              </div>
            </div>
            
            <div class="form-group" show-errors>
              <label for="skills{{$index}}">Skills (if more than one, seperate with a comma):</label>
              <input type="text" id="skills{{$index}}" name="skills{{$index}}" class="form-control" ng-model="vm.experiences[$index].skills" placeholder="Skills">
            </div>
            
            <div class="form-group" show-errors>
              <label for="startDate{{$index}}">Start Date:</label>
              <input type="date" id="startDate{{$index}}" name="startDate{{$index}}" class="form-control" ng-model="vm.experiences[$index].startDate" placeholder="yyyy-MM-dd" required>
              <div ng-messages="vm.experienceForm['startDate'+$index].$error" role="alert">
                <p class="help-block error-text" ng-message="required">Start Date is required. </p>
                <p class="help-block error-text" ng-message="date">Dates must be in yyyy-MM-dd format. </p>
              </div>
            </div>
            
            <div class="form-group" show-errors>
              <label for="endDate{{$index}}">End Date:</label>
              <input type="date" id="endDate{{$index}}" name="endDate{{$index}}" class="form-control" ng-model="vm.experiences[$index].endDate" placeholder="yyyy-MM-dd">
              <div ng-messages="vm.experienceForm['endDate'+$index].$error" role="alert">
                <p class="help-block error-text" ng-message="date">Dates must be in yyyy-MM-dd format. </p>
              </div>
            </div>
            
            <button type="button" class="btn" ng-click="vm.removeExperience($index)">Remove Work Experience</button>
          </div>
        </div> <!-- end ng-repeat -->
        <div class="text-center form-group">
          <div ng-if="results.length === 0">
            You have no work experience.
          </div>
          <button type="button" class="btn" ng-click="vm.addExperience()">Add Work Experience</button>
          <input type="submit" class="btn btn-primary" value="Save"/>
        </div>
      </form>
    </div>
  </section>
</div>
