<section class="row">
  <nav class="col-md-2">
    <h3>Refine by:</h3>
    <ul class="list-group">
      <li class="list-group-item">
        <label class="filter-label">
          Title contains:
          <input class="task-filter" ng-model="vm.filters.name">
        </label>
      </li>
      <li class="list-group-item">
        <label class="filter-label">
          Posting date:
          <input class="task-filter" ng-model="vm.filters.postingDate">
        </label>
      </li>
      <li class="list-group-item">
        <label class="filter-label" >
          Deadline:
          <input class="task-filter" ng-model="vm.filters.deadline">
        </label>
      </li>
      <li class="list-group-item">
        <label class="filter-label">
          Status:
            <input class="task-filter" ng-model="vm.filters.status">
        </label>
      </li>
    </ul>
  </nav>
  <div class="tasks-caption">
    <select ng-model="vm.taskCategory" ng-change="vm.changeTaskCategory()" ng-options="x.bikeshed for x in vm.taskCategories">
    </select>
  </div>
  <div class="col-md-10 tasks-table">
    <div class="tasks-row">
      <div class="tasks-cell">
        Title
      </div>
      <div class="tasks-cell">
        Posting Date
      </div>
      <div class="tasks-cell">
        Deadline
      </div>
      <div class="tasks-cell">
        Status
      </div>
      <div class="tasks-cell" ng-if="vm.taskCategory.id === 'active'">
        Progress
      </div>
      <div class="tasks-cell" ng-if="vm.taskCategory.id === 'open'">
        Payment
      </div>
    </div>
    <div ng-repeat="task in vm.tasks | filter : vm.filters : false as results track by $index">
      <div class="task-item">
        <div class="tasks-row" ng-click="vm.selectTask($index)">
          <div class="tasks-cell clickable-looking">
            {{task.name}}
          </div>
          <div class="tasks-cell">
            {{task.postingDate}}
          </div>
          <div class="tasks-cell">
            {{task.deadline}}
          </div>
          <div class="tasks-cell">
            {{task.status}}
          </div>
          <div class="tasks-cell" ng-if="vm.taskCategory.id === 'active'">
            <rzslider class="progress-slider" rz-slider-model="task.progress" rz-slider-options="vm.sliderOptions"></rzslider>
          </div>
          <div class="tasks-cell" ng-if="task.payment.bidding.bidable">
            ${{task.payment.bidding.startingPrice}} (negotiable)
          </div>
          <div class="tasks-cell" ng-if="!task.payment.bidding.bidable">
            ${{task.payment.staticPrice}}
          </div>
        </div>
        <div ng-if="vm.selectedTask == $index">
          <div class="tasks-row">
            <div class="tasks-cell">
              Categories: {{task.category}}
            </div>
            <div class="tasks-cell">
              Requires: {{task.skillsNeeded}}
            </div>
            <div class="tasks-cell">
              <select ng-model="vm.tasks[$index].taskAction" ng-options="x for x in vm.taskActions" ng-change="vm.actOnTask($index)">
              </select>
            </div>
          </div>
          <div class="tasks-row">
            <div class="tasks-description">
              Description: {{task.description}}
            </div>
          </div>
        </div>
      </div>
    </div> <!-- end ng-repeat -->
    <div class="text-center">
      <div ng-if="vm.loaded === false">
        Loading...
      </div>
      <div ng-if="vm.loaded === true && vm.tasks.length === 0">
        There are no tasks.
      </div>
      <div ng-if="vm.loaded === true && vm.tasks.length > 0 && results.length === 0">
        None of the tasks match your filter settings.
        <button type="button" class="btn" ng-click="vm.clearFilters()">Clear all filters</button>
      </div>
    </div>
  </div>
</section>
